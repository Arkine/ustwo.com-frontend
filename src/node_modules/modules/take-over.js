import React from 'react';
import classnames from 'classnames';

import Actions from 'flux/actions';
import CloseButton from 'elements/close-button';
import {onClickContent} from 'modules/modal';

const takeover = {
  title: "We launched MoodNotes",
  description: "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",
  links: [{
    type: 'http',
    text: 'Go to website',
    url: '/blah'
  }]
};

export default class TakeOver extends React.Component {
  render = () => {
    return (
      <div className="take-over" onClick={onClickContent}>
        <CloseButton ref="close" onClose={this.onClickClose} className="take-over__close" />
        <h1>{takeover.title}</h1>
        <p>{takeover.description}</p>
        {takeover.links.map(this.renderLink)}
      </div>
    );
  }
  renderLink(link) {
    let prefix = "";
    switch(link.type) {
      case 'email':
        prefix = "mailto:";
      break;
      case 'tel':
        prefix = "tel:";
      break;
    }
    return <a className={`take-over__link ${link.type}`} href={`${prefix}${link.url}`}>{link.text}</a>;
  }
  componentDidMount() {
    this.closeTimeout = setTimeout(() => {
      this.refs.close.anim();
    }, 500);
  }
  componentWillUnmount() {
    clearTimeout(this.closeTimeout);
  }
  onClickClose() {
    Actions.closeModal();
  }
};
