'use strict';

import React from 'react';
import get from 'lodash/object/get';

import Actions from 'flux/actions';
import StudioContact from 'components/studio-contact';

export default class Footer extends React.Component {
  onClickShowContacts(e) {
    e.preventDefault();
    ga('send', {
      'hitType': 'event',          // Required.
      'eventCategory': 'contact',   // Required.
      'eventAction': 'click_contact_footer',     // Required.
      'eventLabel': 'home' // TODO: Remove once GA has been hooked into router
    });
    Actions.showContacts();
  }
  onClickSocial(social) {
    return (e) => {
      const target = e.currentTarget;
      e.preventDefault();
      ga('send', {
        'hitType': 'event',          // Required.
        'eventCategory': 'contact',   // Required.
        'eventAction': 'click_social_' + social,     // Required.
        'eventLabel': 'home', // TODO: Remove once GA has been hooked into router
        'hitCallback' : () => {
          window.location = target.href;
        }
      });
    };
  }
  render() {
    const facebookLogo = '<use xlink:href="/images/spritemap.svg#facebook" />';
    const twitterLogo = '<use xlink:href="/images/spritemap.svg#twitter" />';
    const linkedinLogo = '<use xlink:href="/images/spritemap.svg#linkedin" />';
    const studios = this.props.studios && Object.keys(this.props.studios).map((key) => {
      return <StudioContact studio={this.props.studios[key]} />;
    });
    return (
      <footer className="footer">
        <div className="content">
          <div className="general">
            <h1 className="contact-title">{get(this.props, 'data.title')}</h1>
            <hr className="contact-divider" />
            <a className="email-cta" href="mailto:hello@ustwo.com" onClick={this.onClickShowContacts}>{get(this.props, 'data.contact_link_text')}</a>
            <ul className="social">
              <li className="channel facebook">
                <a href={get(this.props, 'data.social.facebook')} onClick={this.onClickSocial('facebook')}>
                  <svg className="logo" title="facebook logo" role="img" dangerouslySetInnerHTML={{__html: facebookLogo }} />
                </a>
              </li>
              <li className="channel twitter">
                <a href={get(this.props, 'data.social.twitter')} onClick={this.onClickSocial('twitter')}>
                  <svg className="logo" title="twitter logo" role="img" dangerouslySetInnerHTML={{__html: twitterLogo }} />
                </a>
              </li>
              <li className="channel linkedin">
                <a href={get(this.props, 'data.social.linkedin')} onClick={this.onClickSocial('linkedin')}>
                  <svg className="logo" title="linkedin logo" role="img" dangerouslySetInnerHTML={{__html: linkedinLogo }} />
                </a>
              </li>
            </ul>
          </div>
          <ul className="studios">
            {studios}
          </ul>
          <p className="copyright">{get(this.props, 'data.copyright')}</p>
        </div>
      </footer>
    );
  }
}
