import React from 'react';
import get from 'lodash/object/get';
import moment from 'moment';
import classnames from 'classnames';

import ModuleRenderer from '_lib/module-renderer';

const post = {
    "id": 8360,
    "date": "2015-06-30T15:05:04",
    "guid": {
        "rendered": "http:\/\/ustwo.com\/?post_type=blog&#038;p=8360"
    },
    "modified": "2015-08-05T09:41:10",
    "modified_gmt": "2015-08-05T09:41:10",
    "slug": "bdd-cross-platform-applications-the-technical-setup",
    "type": "post",
    "link": "http:\/\/ustwo-staging.aws.hmn.md\/blog\/bdd-cross-platform-applications-the-technical-setup\/",
    "title": {
        "rendered": "BDD Cross-Platform Applications, the Technical Setup"
    },
    "content": {
        "rendered": ""
    },
    "excerpt": {
        "rendered": "<p>We&#8217;ve been working over the last few months on a sample reference project for BDD that we would like to share with the wider community for discussion and feedback.<\/p>\n"
    },
    "author": 18,
    "featured_image": 8373,
    "comment_status": "open",
    "ping_status": "open",
    "sticky": false,
    "format": "standard",
    "page_builder": [{
        "name": "",
        "attr": []
    }, {
        "name": "text",
        "attr": [{
            "name": "heading",
            "value": "BDD Cross-Platform Applications, the Technical Setup",
            "type": "text"
        }, {
            "name": "body",
            "value": "<p>We started our journey into Behaviour Driven Development and automated functional testing nearly 3 years ago. And it\u2019s definitely been a very interesting journey.<\/p>\n<h3>What is BDD?<\/h3>\n<p>Despite its potentially intimidating name, BDD is an amazingly simple tool for the whole team. It\u2019s a methodology to develop software with a focus on collaboration, particularly with less technical people. BDD tests create a shared language across disciplines to describe how systems or applications work. The other main benefit of BDD is automated testing, ie, the tests are executed by a machine, liberating testers of the tedious work of having to manually repeat a test script over and over again.<\/p>\n<p>The adoption of \u2018<a href=\"https:\/\/cucumber.io\/blog\/2015\/03\/28\/bdd-is-a-centered-rather-than-a-bounded-community\" target=\"_blank\">proper<\/a>\u2019 BDD at ustwo varies depending on teams and clients, but overall the results have been very positive.<\/p>\n<h3>Collaboration and Testing<\/h3>\n<p>In terms of collaboration, the reward has been to prevent mistakes from happening by sitting the team together to discuss the work at hand before designing or coding. Using concrete examples to describe behaviour removes ambiguity.<\/p>\n<p>On the test automation side of things, the reward has been rock-solid applications as a result of a) catching bugs early in the development process and b) increasing the testability of our code.<\/p>\n<p>To make the most of the collaboration sessions we ask designers and developers to avoid working ahead of time, because we have seen time and again that once people see a solution (in the form of a visual interface or code) they have a hard time not limiting themselves to describing it during BDD sessions.<\/p>\n<p>Take, for example, this screen from our recently released Harvey Nichols app (<a href=\"https:\/\/itunes.apple.com\/gb\/app\/rewards-by-harvey-nichols\/id994153107?mt=8\">iOS<\/a>, <a href=\"https:\/\/play.google.com\/store\/apps\/details?id=com.harveynichols.rewards&hl=en\" target=\"_blank\">Android<\/a>):<\/p>\n<p><img src=\"https:\/\/hmn-uploads.s3.amazonaws.com\/ustwo-staging\/uploads\/2015\/06\/Benefit_details_platinum.png\" alt=\"Harvey Nichols rewards details platinum\" width=\"640\" height=\"1136\" class=\"aligncenter size-full wp-image-8364\" \/><\/p>\n<p>Once you\u2019ve seen it, if you then try to explain how it <em>works<\/em>, it\u2019s very hard to avoid describing what you've <em>seen<\/em> \u2013 a bit like in <a href=\"https:\/\/www.youtube.com\/watch?v=H1Dyp3jexA0&feature=youtu.be&t=75\" target=\"_blank\">Inception<\/a>. You think about form before function and this limits the team\u2019s ability to explore other solutions. If you describe it first, however, (\u201cshould display user\u2019s tier, name, number of points, and extra links\u201d), there\u2019s still plenty of freedom to come up with an interface that fits the behaviour requirements.<\/p>\n<p>Stopping design and code getting ahead of each other has definitely had an impact on the way we work, and some teams and clients have adapted better to new ways of working.<\/p>\n<p>Another big hurdle is the relatively complex technical setup. We are still tweaking some of the specifics here and there, but with a few BDD\u2019ed projects under our belt we have come to a certain stability around the main concepts:<\/p>\n<ol>\n<li>The apps for each platform solve the same business problems, hence the interface should be reasonably similar.<\/li>\n<li>Despite 1), we must be able to accommodate platform-specific differences to stay close to platform interaction best practices.<\/li>\n<li><a href=\"https:\/\/cucumber.io\/\" target=\"_blank\">Cucumber<\/a> as our BDD tool of choice.<\/li>\n<li><a href=\"http:\/\/benmabey.com\/2008\/05\/19\/imperative-vs-declarative-scenarios-in-user-stories.html\" target=\"_blank\">Declarative tests<\/a> and <a href=\"http:\/\/developer.xamarin.com\/guides\/testcloud\/calabash\/xplat-best-practices\/\" target=\"_blank\">page objects<\/a>.<\/li>\n<li>A local mock server that enables us to test our applications under extreme conditions and edge cases.<\/li>\n<\/ol>\n<p>While none of these concepts are difficult on their own, when you combine them all, the size and complexity of the testing code base is considerable. This requires capable technical testers to be comfortable writing, growing and maintaining automation code. Also, the tools to do test automation for mobile devices are not as stable as their web counterparts, sometimes decreasing the overall confidence in the testing suite.<\/p>\n<p><h3>BDD Technical Setup<\/h3><\/p>\n<p>To help with the technical setup we have been working over the last few months on a sample reference project that demonstrates all these concepts and that we would like to share with the wider community for discussion and feedback. The code is on <a href=\"https:\/\/github.com\/ustwo\/bdd-crossplatform-apps\" target=\"_blank\">GitHub<\/a> where there is also documentation, particularly around our choices and trade-offs.<\/p>\n<p>It is a project to use as a reference for what underpins the BDD process from a technical point of view, so we are calling developers and testers to get involved. The points of view of people with and without previous BDD experience are both interesting, for different reasons.<\/p>\n<p>So yeah, hop-on to <a href=\"https:\/\/github.com\/ustwo\/bdd-crossplatform-apps\" target=\"_blank\">GitHub<\/a>, email <a href=\"http:\/\/bdd@ustwo.com\" target=\"_blank\">bdd@ustwo.com<\/a> or get on the <a href=\"https:\/\/slackline.io\/shared_channels\/bdd\" target=\"_blank\">BDD channel in SlackLine<\/a>.<\/p>\n<p>Thank you!<\/p>\n",
            "type": "wysiwyg"
        }]
    }],
    "_links": {
        "self": [{
            "href": "http:\/\/ustwo-staging.aws.hmn.md\/wp-json\/wp\/v2\/posts\/8360"
        }],
        "collection": [{
            "href": "http:\/\/ustwo-staging.aws.hmn.md\/wp-json\/wp\/v2\/posts"
        }],
        "author": [{
            "embeddable": true,
            "href": "http:\/\/ustwo-staging.aws.hmn.md\/wp-json\/wp\/v2\/users\/18"
        }],
        "replies": [{
            "embeddable": true,
            "href": "http:\/\/ustwo-staging.aws.hmn.md\/wp-json\/wp\/v2\/comments?post_id=8360"
        }],
        "version-history": [{
            "href": "http:\/\/ustwo-staging.aws.hmn.md\/wp-json\/wp\/v2\/posts\/8360\/revisions"
        }],
        "http:\/\/v2.wp-api.org\/attachment": [{
            "embeddable": true,
            "href": "http:\/\/ustwo-staging.aws.hmn.md\/wp-json\/wp\/v2\/media?post_parent=8360"
        }],
        "http:\/\/v2.wp-api.org\/term": [{
            "taxonomy": "category",
            "embeddable": true,
            "href": "http:\/\/ustwo-staging.aws.hmn.md\/wp-json\/wp\/v2\/terms\/category?post=8360"
        }, {
            "taxonomy": "post_tag",
            "embeddable": true,
            "href": "http:\/\/ustwo-staging.aws.hmn.md\/wp-json\/wp\/v2\/terms\/tag?post=8360"
        }, {
            "taxonomy": "post_format",
            "embeddable": true,
            "href": "http:\/\/ustwo-staging.aws.hmn.md\/wp-json\/wp\/v2\/terms\/post_format?post=8360"
        }],
        "http:\/\/v2.wp-api.org\/meta": [{
            "embeddable": true,
            "href": "http:\/\/ustwo-staging.aws.hmn.md\/wp-json\/wp\/v2\/posts\/8360\/meta"
        }]
    },
    "_embedded": {
        "author": [{
            "avatar_urls": {
                "24": "http:\/\/1.gravatar.com\/avatar\/d5a3b89f816b32d2a430abb889fecf57?s=24&d=mm&r=g",
                "48": "http:\/\/1.gravatar.com\/avatar\/d5a3b89f816b32d2a430abb889fecf57?s=48&d=mm&r=g",
                "96": "http:\/\/1.gravatar.com\/avatar\/d5a3b89f816b32d2a430abb889fecf57?s=96&d=mm&r=g"
            },
            "description": "",
            "id": 18,
            "link": "http:\/\/ustwo-staging.aws.hmn.md\/blog\/author\/juan-ustwo\/",
            "name": "Juan",
            "url": ""
        }],
        "replies": [],
        "http:\/\/v2.wp-api.org\/attachment": [
            []
        ],
        "http:\/\/v2.wp-api.org\/term": [
            [{
                "id": 248,
                "link": "http:\/\/ustwo-staging.aws.hmn.md\/blog\/category\/android\/",
                "name": "Android",
                "slug": "android",
                "taxonomy": "category",
                "_links": {
                    "self": [{
                        "href": "http:\/\/ustwo-staging.aws.hmn.md\/wp-json\/wp\/v2\/terms\/category\/248"
                    }],
                    "collection": [{
                        "href": "http:\/\/ustwo-staging.aws.hmn.md\/wp-json\/wp\/v2\/terms\/category"
                    }]
                }
            }, {
                "id": 485,
                "link": "http:\/\/ustwo-staging.aws.hmn.md\/blog\/category\/userxp\/apps\/",
                "name": "Apps",
                "slug": "apps",
                "taxonomy": "category",
                "_links": {
                    "self": [{
                        "href": "http:\/\/ustwo-staging.aws.hmn.md\/wp-json\/wp\/v2\/terms\/category\/485"
                    }],
                    "collection": [{
                        "href": "http:\/\/ustwo-staging.aws.hmn.md\/wp-json\/wp\/v2\/terms\/category"
                    }],
                    "up": [{
                        "embeddable": true,
                        "href": "http:\/\/ustwo-staging.aws.hmn.md\/wp-json\/wp\/v2\/terms\/category\/458"
                    }]
                }
            }, {
                "id": 290,
                "link": "http:\/\/ustwo-staging.aws.hmn.md\/blog\/category\/business\/",
                "name": "Business",
                "slug": "business",
                "taxonomy": "category",
                "_links": {
                    "self": [{
                        "href": "http:\/\/ustwo-staging.aws.hmn.md\/wp-json\/wp\/v2\/terms\/category\/290"
                    }],
                    "collection": [{
                        "href": "http:\/\/ustwo-staging.aws.hmn.md\/wp-json\/wp\/v2\/terms\/category"
                    }]
                }
            }, {
                "id": 306,
                "link": "http:\/\/ustwo-staging.aws.hmn.md\/blog\/category\/culture\/",
                "name": "Culture",
                "slug": "culture",
                "taxonomy": "category",
                "_links": {
                    "self": [{
                        "href": "http:\/\/ustwo-staging.aws.hmn.md\/wp-json\/wp\/v2\/terms\/category\/306"
                    }],
                    "collection": [{
                        "href": "http:\/\/ustwo-staging.aws.hmn.md\/wp-json\/wp\/v2\/terms\/category"
                    }]
                }
            }, {
                "id": 486,
                "link": "http:\/\/ustwo-staging.aws.hmn.md\/blog\/category\/design\/",
                "name": "Design",
                "slug": "design",
                "taxonomy": "category",
                "_links": {
                    "self": [{
                        "href": "http:\/\/ustwo-staging.aws.hmn.md\/wp-json\/wp\/v2\/terms\/category\/486"
                    }],
                    "collection": [{
                        "href": "http:\/\/ustwo-staging.aws.hmn.md\/wp-json\/wp\/v2\/terms\/category"
                    }]
                }
            }, {
                "id": 488,
                "link": "http:\/\/ustwo-staging.aws.hmn.md\/blog\/category\/development\/",
                "name": "Development",
                "slug": "development",
                "taxonomy": "category",
                "_links": {
                    "self": [{
                        "href": "http:\/\/ustwo-staging.aws.hmn.md\/wp-json\/wp\/v2\/terms\/category\/488"
                    }],
                    "collection": [{
                        "href": "http:\/\/ustwo-staging.aws.hmn.md\/wp-json\/wp\/v2\/terms\/category"
                    }]
                }
            }, {
                "id": 489,
                "link": "http:\/\/ustwo-staging.aws.hmn.md\/blog\/category\/innovation\/",
                "name": "innovation",
                "slug": "innovation",
                "taxonomy": "category",
                "_links": {
                    "self": [{
                        "href": "http:\/\/ustwo-staging.aws.hmn.md\/wp-json\/wp\/v2\/terms\/category\/489"
                    }],
                    "collection": [{
                        "href": "http:\/\/ustwo-staging.aws.hmn.md\/wp-json\/wp\/v2\/terms\/category"
                    }]
                }
            }, {
                "id": 249,
                "link": "http:\/\/ustwo-staging.aws.hmn.md\/blog\/category\/ipad\/",
                "name": "iPad",
                "slug": "ipad",
                "taxonomy": "category",
                "_links": {
                    "self": [{
                        "href": "http:\/\/ustwo-staging.aws.hmn.md\/wp-json\/wp\/v2\/terms\/category\/249"
                    }],
                    "collection": [{
                        "href": "http:\/\/ustwo-staging.aws.hmn.md\/wp-json\/wp\/v2\/terms\/category"
                    }]
                }
            }, {
                "id": 250,
                "link": "http:\/\/ustwo-staging.aws.hmn.md\/blog\/category\/iphone\/",
                "name": "iPhone",
                "slug": "iphone",
                "taxonomy": "category",
                "_links": {
                    "self": [{
                        "href": "http:\/\/ustwo-staging.aws.hmn.md\/wp-json\/wp\/v2\/terms\/category\/250"
                    }],
                    "collection": [{
                        "href": "http:\/\/ustwo-staging.aws.hmn.md\/wp-json\/wp\/v2\/terms\/category"
                    }]
                }
            }, {
                "id": 251,
                "link": "http:\/\/ustwo-staging.aws.hmn.md\/blog\/category\/mobile_content\/",
                "name": "Mobile content",
                "slug": "mobile_content",
                "taxonomy": "category",
                "_links": {
                    "self": [{
                        "href": "http:\/\/ustwo-staging.aws.hmn.md\/wp-json\/wp\/v2\/terms\/category\/251"
                    }],
                    "collection": [{
                        "href": "http:\/\/ustwo-staging.aws.hmn.md\/wp-json\/wp\/v2\/terms\/category"
                    }]
                }
            }],
            [{
                "id": 263,
                "link": "http:\/\/ustwo-staging.aws.hmn.md\/blog\/tag\/digitallies\/",
                "name": "#DigitalLies",
                "slug": "digitallies",
                "taxonomy": "post_tag",
                "_links": {
                    "self": [{
                        "href": "http:\/\/ustwo-staging.aws.hmn.md\/wp-json\/wp\/v2\/terms\/tag\/263"
                    }],
                    "collection": [{
                        "href": "http:\/\/ustwo-staging.aws.hmn.md\/wp-json\/wp\/v2\/terms\/tag"
                    }]
                }
            }, {
                "id": 264,
                "link": "http:\/\/ustwo-staging.aws.hmn.md\/blog\/tag\/2011\/",
                "name": "2011",
                "slug": "2011",
                "taxonomy": "post_tag",
                "_links": {
                    "self": [{
                        "href": "http:\/\/ustwo-staging.aws.hmn.md\/wp-json\/wp\/v2\/terms\/tag\/264"
                    }],
                    "collection": [{
                        "href": "http:\/\/ustwo-staging.aws.hmn.md\/wp-json\/wp\/v2\/terms\/tag"
                    }]
                }
            }, {
                "id": 265,
                "link": "http:\/\/ustwo-staging.aws.hmn.md\/blog\/tag\/2013\/",
                "name": "2013",
                "slug": "2013",
                "taxonomy": "post_tag",
                "_links": {
                    "self": [{
                        "href": "http:\/\/ustwo-staging.aws.hmn.md\/wp-json\/wp\/v2\/terms\/tag\/265"
                    }],
                    "collection": [{
                        "href": "http:\/\/ustwo-staging.aws.hmn.md\/wp-json\/wp\/v2\/terms\/tag"
                    }]
                }
            }, {
                "id": 266,
                "link": "http:\/\/ustwo-staging.aws.hmn.md\/blog\/tag\/5g\/",
                "name": "5G",
                "slug": "5g",
                "taxonomy": "post_tag",
                "_links": {
                    "self": [{
                        "href": "http:\/\/ustwo-staging.aws.hmn.md\/wp-json\/wp\/v2\/terms\/tag\/266"
                    }],
                    "collection": [{
                        "href": "http:\/\/ustwo-staging.aws.hmn.md\/wp-json\/wp\/v2\/terms\/tag"
                    }]
                }
            }, {
                "id": 267,
                "link": "http:\/\/ustwo-staging.aws.hmn.md\/blog\/tag\/accessibility\/",
                "name": "accessibility",
                "slug": "accessibility",
                "taxonomy": "post_tag",
                "_links": {
                    "self": [{
                        "href": "http:\/\/ustwo-staging.aws.hmn.md\/wp-json\/wp\/v2\/terms\/tag\/267"
                    }],
                    "collection": [{
                        "href": "http:\/\/ustwo-staging.aws.hmn.md\/wp-json\/wp\/v2\/terms\/tag"
                    }]
                }
            }, {
                "id": 268,
                "link": "http:\/\/ustwo-staging.aws.hmn.md\/blog\/tag\/advent-calendar\/",
                "name": "Advent Calendar",
                "slug": "advent-calendar",
                "taxonomy": "post_tag",
                "_links": {
                    "self": [{
                        "href": "http:\/\/ustwo-staging.aws.hmn.md\/wp-json\/wp\/v2\/terms\/tag\/268"
                    }],
                    "collection": [{
                        "href": "http:\/\/ustwo-staging.aws.hmn.md\/wp-json\/wp\/v2\/terms\/tag"
                    }]
                }
            }, {
                "id": 269,
                "link": "http:\/\/ustwo-staging.aws.hmn.md\/blog\/tag\/agile\/",
                "name": "Agile",
                "slug": "agile",
                "taxonomy": "post_tag",
                "_links": {
                    "self": [{
                        "href": "http:\/\/ustwo-staging.aws.hmn.md\/wp-json\/wp\/v2\/terms\/tag\/269"
                    }],
                    "collection": [{
                        "href": "http:\/\/ustwo-staging.aws.hmn.md\/wp-json\/wp\/v2\/terms\/tag"
                    }]
                }
            }, {
                "id": 270,
                "link": "http:\/\/ustwo-staging.aws.hmn.md\/blog\/tag\/android\/",
                "name": "Android",
                "slug": "android",
                "taxonomy": "post_tag",
                "_links": {
                    "self": [{
                        "href": "http:\/\/ustwo-staging.aws.hmn.md\/wp-json\/wp\/v2\/terms\/tag\/270"
                    }],
                    "collection": [{
                        "href": "http:\/\/ustwo-staging.aws.hmn.md\/wp-json\/wp\/v2\/terms\/tag"
                    }]
                }
            }, {
                "id": 271,
                "link": "http:\/\/ustwo-staging.aws.hmn.md\/blog\/tag\/android-wear\/",
                "name": "android wear",
                "slug": "android-wear",
                "taxonomy": "post_tag",
                "_links": {
                    "self": [{
                        "href": "http:\/\/ustwo-staging.aws.hmn.md\/wp-json\/wp\/v2\/terms\/tag\/271"
                    }],
                    "collection": [{
                        "href": "http:\/\/ustwo-staging.aws.hmn.md\/wp-json\/wp\/v2\/terms\/tag"
                    }]
                }
            }, {
                "id": 272,
                "link": "http:\/\/ustwo-staging.aws.hmn.md\/blog\/tag\/apis\/",
                "name": "APIs",
                "slug": "apis",
                "taxonomy": "post_tag",
                "_links": {
                    "self": [{
                        "href": "http:\/\/ustwo-staging.aws.hmn.md\/wp-json\/wp\/v2\/terms\/tag\/272"
                    }],
                    "collection": [{
                        "href": "http:\/\/ustwo-staging.aws.hmn.md\/wp-json\/wp\/v2\/terms\/tag"
                    }]
                }
            }],
            [{
                "code": "rest_no_route",
                "message": "No route was found matching the URL and request method",
                "data": {
                    "status": 404
                }
            }]
        ],
        "http:\/\/v2.wp-api.org\/meta": [
            [{
                "code": "rest_forbidden",
                "message": "Sorry, you cannot view the meta for this post.",
                "data": {
                    "status": 403
                }
            }]
        ]
    }
};

export default class PagePost extends React.Component {
  render() {
    // const post = this.props.post;
    const classes = classnames('page-post', `blog-label-${get(post, 'category', 'category').toLowerCase()}`);
    return (
      <article className={classes}>
        <div className="hero-image" style={{backgroundImage: `url(${get(post, '_embedded.author.0.avatar_urls.96')})`}}>
          <img className="image" src={get(post, '_embedded.author.0.avatar_urls.96')} />
        </div>
        <div className="content-container">
          <div className="blog-category">{get(post, 'category', 'category')}</div>
          <h1 className="title">{get(post, 'title.rendered')}</h1>
          <div className="excerpt" dangerouslySetInnerHTML={{ __html: get(post, 'excerpt.rendered')}} />
          <p className="meta">By {get(post, '_embedded.author.0.name')} - <span className="date">{moment(get(post, 'date')).format('D MMMM YYYY')}</span></p>
          <hr className="rule" />
          {/*}<div className="content" dangerouslySetInnerHTML={{ __html: get(post, 'content.rendered')}} />*/}
          {get(post, 'page_builder', []).map(this.getModuleRenderer(get(post, 'colors', {})))}
          <hr className="rule" />
          <section className="author">
            <img className="mugshot" src={get(post, '_embedded.author.0.avatar_urls.96')} />
            <h1 className="title">About {get(post, '_embedded.author.0.name')}</h1>
            <p className="desc">{get(post, '_embedded.author.0.description')}</p>
            {/*<ul className="links">
              <li className="link"><a href={get(post, 'author.links[0].href')}>{get(post, 'author.links[0].text')}</a></li>
            </ul>*/}
          </section>
        </div>
      </article>
    );
  }
  getModuleRenderer(colours) {
    return (moduleData) => {
      return ModuleRenderer(moduleData, colours, () => {
        this.zebra = !this.zebra;
        return this.zebra;
      });
    };
  }
}
