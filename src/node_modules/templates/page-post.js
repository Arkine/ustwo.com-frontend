import React from 'react';
import get from 'lodash/object/get';

import SingleColumn from 'components/single-column';
import QuoteBlock from 'components/quote-block';
import FullImage from 'components/full-image';

export default class PageCaseStudy extends React.Component {
  render() {
    const caseStudy = this.props.caseStudy;
    return (
      <article className="page-case-study">
        <style>{`
          a {
            border-bottom-color: ${get(caseStudy, 'colors.secondary')};
          }
        `}</style>
        {/**/}
        {get(caseStudy, 'page_builder', []).map(this.renderModule)}
      </article>
    );
  }
  renderModule = (moduleData) => {
    const caseStudy = this.props.caseStudy;
    let module;
    switch(moduleData.name) {
      case 'header':
        module = <SingleColumn className="page-case-study__intro" title={get(moduleData, 'attr.heading.value')} headingColour={get(caseStudy, 'colors.primary')} ruleColour={get(caseStudy, 'colors.secondary')}
      backgroundColour={get(caseStudy, 'colors.bg')}>{get(moduleData, 'attr.subheading.value')}</SingleColumn>;
        break;
      case 'text':
        module = <SingleColumn title={get(moduleData, 'attr.heading.value')} headingColour={get(caseStudy, 'colors.primary')} ruleColour={get(caseStudy, 'colors.secondary')}
        backgroundColour={this.zebra && get(caseStudy, 'colors.bg')}>{get(moduleData, 'attr.body.value')}</SingleColumn>;
        this.zebra = !this.zebra;
        break;
      case 'image':
        module = <FullImage photo={get(moduleData, 'attr.image.value.0.sizes.large.url')} />;
        break;
      case 'blockquote':
        module = (
          <QuoteBlock
              source={get(moduleData, 'attr.source.value')}
              backgroundColour={get(caseStudy, 'colors.primary')}
            >
              {get(moduleData, 'attr.text.value')}
          </QuoteBlock>
        )
        break;
    }
    return module;
  }
}
